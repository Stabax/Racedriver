<?xml version="1.0" encoding="UTF-8"?>
<!-- PRE - PROFILE -->
<Menu Id="Home" Title="Car">
  <Button Type="Intern" Target="loadGameMenu()"><Text Id="game.continue"/></Button>
  <Button Type="Goto" Target="NewGame"><Text Id="game.new"/></Button>
  <Button Type="Goto" Target="Credits"><Text Id="game.about"/></Button>
  <Button Type="Intern" Target="exit()"><Text Id="game.quit"/></Button>
</Menu>
<Menu Id="NewGame">
  <Text Id="profile.promptname"/>
  <Select Id="Difficulty" Text="Difficulty">
    <Option Value="0"><Text Id="difficulty.easy"/></Option>
    <Option Value="1"><Text Id="difficulty.medium"/></Option>
    <Option Value="2"><Text Id="difficulty.hard"/></Option>
  </Select>
  <Select Id="Locale" Text="Locale">
    <Option Value="en-US">en-US</Option>
    <Option Value="fr-FR">fr-FR</Option>
  </Select>
  <Input Id="Profile"><Text Id="global.name"/></Input>
  <Button Type="Script" Target="CreateProfile"><Text Id="global.create"/></Button>
  <Button Type="Goto" Target="Home"><Text Id="global.back"/></Button>
</Menu>
<Script Id="CreateProfile">
  createProfile(getInputData("Profile"))
  goTo("Main")
</Script>
<Menu Id="Credits" Title="Game">
  <Script>
    print(getVersion() .. "\n")
  </Script>
  <Sep/>
  <Button Type="Goto" Target="Home"><Text Id="global.back"/></Button>
</Menu>
<!-- GAME -->
<Menu Id="Main" Title="Game">
  <Button Type="Goto" Target="Race"><Text Id="game.race"/></Button>
  <Button Type="Intern" Target="garageMenu()"><Text Id="game.garage"/></Button>
  <Button Type="Intern" Target="statsMenu()"><Text Id="game.stats"/></Button>
  <Button Type="Goto" Target="Options"><Text Id="game.options"/></Button>
  <Button Type="Intern" Target="exit()"><Text Id="game.quit"/></Button>
</Menu>
<Menu Id="Options" Title="Options" OnLoad="OptionsOnLoad">
  <Select Id="Difficulty" Text="Difficulty">
    <Option Value="0"><Text Id="difficulty.easy"/></Option>
    <Option Value="1"><Text Id="difficulty.medium"/></Option>
    <Option Value="2"><Text Id="difficulty.hard"/></Option>
  </Select>
  <Select Id="Locale" Text="Locale">
    <Option Value="en-US">en-US</Option>
    <Option Value="fr-FR">fr-FR</Option>
  </Select>
  <Input Id="Profile">Profile name</Input>
  <Sep/>
  <Button Type="Script" Target="ApplyOptions"><Text Id="global.apply"/></Button>
  <Button Type="Goto" Target="Main"><Text Id="global.back"/></Button>
</Menu>
<Script Id="OptionsOnLoad">
  setSelectValue("Difficulty", getProfileDifficulty())
  setInputData("Profile", getProfileName())
  setSelectValue("Locale", getProfileLocale())
</Script>
<Script Id="ApplyOptions">
  setProfileName(getInputData("Profile"))
  setProfileDifficulty(getSelectValue("Difficulty"))
  setProfileLocale(getSelectValue("Locale"))
  goTo("Main")
</Script>
<Menu Id="Race" Title="Game">
  <Text>Select mode</Text>
  <Sep/>
  <Button Type="Script" Target="StartRace"><Text Id="race.free"/></Button>
  <Text>-<Text Id="race.career"/>-</Text>
  <Sep/>
  <Button Type="Goto" Target="Main"><Text Id="global.back"/></Button>
</Menu>
<Script Id="StartRace">
  selectCarMenu();
  selectTrackMenu();
  startRace()
</Script>
<Menu Id="Stats">
  <Script>
    printStats()
  </Script>
  <Button Type="Goto" Target="Main"><Text Id="global.back"/></Button>
</Menu>
<!-- GARAGE -->
<Menu Id="Box" Title="Garage">
  <Script>
    car = getBox(getEnv("Box"))
    print("[Box "..getEnv("Box").."] "..car.manufacturer.." "..car.name)
  </Script>
  <Sep/>
  <Button Type="Script" Target="RepairCar"><Text Id="garage.repair"/></Button>
  <Button Type="Goto" Target="UpgradeCar"><Text Id="garage.upgrade"/></Button>
  <Button Type="Script" Target="SellCar"><Text Id="garage.sell"/></Button>
  <Sep/>
  <Button Type="Goto" Target="Main"><Text Id="global.back"/></Button>
</Menu>
<Script Id="RepairCar">
  alert("not impl");
</Script>
<Script Id="SellCar">
  alert("not impl")
</Script>
<Menu Id="UpgradeCar"  Title="Garage">
  <Script>
    car = getBox(getEnv("Box"))
    print("[Box "..getEnv("Box").."] "..car.manufacturer.." "..car.name)
  </Script>
  <Sep/>
  <Button Type="Intern" Target="upgradeEngineMenu()"><Text Id="car.engine"/></Button>
  <Button Type="Intern" Target="upgradeSpoilerMenu()"><Text Id="car.spoiler"/></Button>
  <Button Type="Intern" Target="upgradeTiresMenu()"><Text Id="car.tires"/></Button>
  <Button Type="Intern" Target="chooseCharmMenu()"><Text Id="car.charm"/></Button>
  <Sep/>
  <Button Type="Goto" Target="Main"><Text Id="global.back"/></Button>
</Menu>