<?xml version="1.0" encoding="UTF-8"?>
<!-- PRE - PROFILE -->
<Menu Id="Home" Title="1">
  <Button Type="Intern" Target="loadGameMenu()">Continue game</Button>
  <Button Type="Goto" Target="NewGame">New game</Button>
  <Button Type="Goto" Target="Credits">About</Button>
  <Button Type="Intern" Target="exit()">Quit</Button>
</Menu>
<Menu Id="NewGame">
  <Text>Enter Profile Name</Text>
  <Select Id="Difficulty" Text="Difficulty">
    <Option Value="0">Easy</Option>
    <Option Value="1">Medium</Option>
    <Option Value="2">Hard</Option>
  </Select>
  <Input Id="Profile">Name</Input>
  <Button Type="Script" Target="CreateProfile">Create</Button>
  <Button Type="Goto" Target="Home">Back</Button>
</Menu>
<Script Id="CreateProfile">
  createProfile(getInputData("Profile"))
  goTo("Main")
</Script>
<Menu Id="Credits" Title="1">
  <Script>
    print(getVersion() .. "\n")
  </Script>
  <Sep/>
  <Button Type="Goto" Target="Home">Back</Button>
</Menu>
<!-- GAME -->
<Menu Id="Main" Title="1">
  <Button Type="Goto" Target="Race">Race</Button>
  <Button Type="Intern" Target="garageMenu()">Garage</Button>
  <Button Type="Intern" Target="statsMenu()">Stats</Button>
  <Button Type="Goto" Target="Options">Options</Button>
  <Button Type="Intern" Target="exit()">Quit</Button>
</Menu>
<Menu Id="Options" Title="2" OnLoad="OptionsOnLoad">
  <Select Id="Difficulty" Text="Difficulty">
    <Option Value="0">Easy</Option>
    <Option Value="1">Medium</Option>
    <Option Value="2">Hard</Option>
  </Select>
  <Input Id="Profile">Profile name</Input>
  <Sep/>
  <Button Type="Script" Target="ApplyOptions">Apply</Button>
  <Button Type="Goto" Target="Main">Back</Button>
</Menu>
<Script Id="OptionsOnLoad">
  setSelectValue("Difficulty", getProfileDifficulty())
  setInputData("Profile", getProfileName())
</Script>
<Script Id="ApplyOptions">
  setProfileName(getInputData("Profile"))
  setProfileDifficulty(getSelectValue("Difficulty"))
  goTo("Main")
</Script>
<Menu Id="Race" Title="1">
  <Text>Select mode</Text>
  <Sep/>
  <Button Type="Script" Target="StartRace">Free race</Button>
  <Text>-Career-</Text>
  <Sep/>
  <Button Type="Goto" Target="Main">Back</Button>
</Menu>
<Script Id="StartRace">
  selectCarMenu();
  selectTrackMenu();
  startRace()
</Script>
<Menu Id="Stats">
  <Script>
    printStats()
  </Script>
  <Button Type="Goto" Target="Main">Back</Button>
</Menu>
<!-- GARAGE -->
<Menu Id="Box" Title="3">
  <Script>
    car = getBox(getEnv("Box"))
    print("[Box "..getEnv("Box").."] "..car.manufacturer.." "..car.name)
  </Script>
  <Sep/>
  <Button Type="Script" Target="RepairCar">Repair</Button>
  <Button Type="Goto" Target="UpgradeCar">Upgrade</Button>
  <Button Type="Script" Target="SellCar">Sell</Button>
  <Sep/>
  <Button Type="Goto" Target="Main">Back</Button>
</Menu>
<Script Id="RepairCar">
  alert("not impl");
</Script>
<Script Id="SellCar">
  alert("not impl")
</Script>
<Menu Id="UpgradeCar"  Title="3">
  <Script>
    car = getBox(getEnv("Box"))
    print("[Box "..getEnv("Box").."] "..car.manufacturer.." "..car.name)
  </Script>
  <Sep/>
  <Button Type="Intern" Target="upgradeEngineMenu()">Engine</Button>
  <Button Type="Intern" Target="upgradeSpoilerMenu()">Spoiler</Button>
  <Button Type="Intern" Target="upgradeTiresMenu()">Tires</Button>
  <Button Type="Intern" Target="chooseCharmMenu()">Charm</Button>
  <Sep/>
  <Button Type="Goto" Target="Main">Back</Button>
</Menu>